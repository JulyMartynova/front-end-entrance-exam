!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const e="resumeHtmlData";let t=null;function n(){clearTimeout(t),t=setTimeout(()=>{var t;const n=null==(t=document.getElementById("app"))?void 0:t.innerHTML;n&&(localStorage.setItem(e,n),console.log("HTML сохранен"))},1e3)}function o(e){var t;if(!(null==(t=null==e?void 0:e.classList)?void 0:t.add))return console.error("Invalid element passed to makeElementEditable"),null;const o=e.className,i=e.contentEditable;e.classList.add("editable-element"),e.contentEditable="true";const r=()=>{e.classList.add("editable-focused")},s=()=>{e.classList.remove("editable-focused"),n()},l=()=>{n()};return e.addEventListener("focus",r),e.addEventListener("blur",s),e.addEventListener("input",l),function(){e.classList.remove("editable-element","editable-focused"),e.contentEditable=i,e.className=o,e.removeEventListener("focus",r),e.removeEventListener("blur",s),e.removeEventListener("input",l)}}function i(){this.textContent.startsWith("#")||(this.textContent="#"+this.textContent.replace(/^#/,""),function(e){if(!e)return;const t=document.createRange(),n=window.getSelection();t.selectNodeContents(e),t.collapse(!1),n.removeAllRanges(),n.addRange(t)}(this))}function r(e){return"Enter"!==e.key||e.shiftKey?0===this.textContent.length?(e.preventDefault(),void function(e){if(!e)return;const t=e.closest("ul");if(!t)return;const n=Array.from(t.children);if(n.length>1){const t=n.indexOf(e),o=n[t-1],i=n[t+1];e.remove();const r=o||i;r&&setTimeout(()=>{r.focus(),placeCaretAtEnd(r)},0)}else e.textContent="",placeCaretAtStart(e)}(this)):void(" "===e.key&&"Новый пункт"===this.textContent.trim()&&(e.preventDefault(),this.textContent="")):(e.preventDefault(),void function(e){if(!e)return;const t=document.createElement("li");t.textContent="Новый пункт",t.contentEditable="true",t.addEventListener("keydown",r),o(t);const n=e.closest("ul");n&&(n.insertBefore(t,e.nextSibling),setTimeout(()=>{t.focus(),placeCaretAtStart(t)},0))}(this))}function s(e){e&&(o(e),e.addEventListener("input",function(){this.textContent.trim()||"none"===this.style.display||(this.style.display="none")}),e.addEventListener("blur",function(){!function(e){if(!e)return;e.style.display=""===e.textContent.trim()?"none":"inline-block"}(this)}),e.addEventListener("focus",function(){"none"===this.style.display&&(this.style.display="inline-block",this.textContent="")}))}function l(){if("undefined"==typeof html2pdf)return void console.error("html2pdf is not available");const e=document.getElementById("app");if(!e)return;const t=e.cloneNode(!0);t.classList.add("pdf-export");html2pdf().set({margin:[0,0,0,0],filename:"resume.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:2,useCORS:!0,letterRendering:!0,scrollX:0,scrollY:0},jsPDF:{unit:"mm",format:"a4",orientation:"portrait"}}).from(t).save()}document.addEventListener("DOMContentLoaded",function(){try{"undefined"!=typeof Waves&&Waves.init({duration:50}),function(){const t=localStorage.getItem(e);if(!t)return!1;const n=document.getElementById("app");return!!n&&(n.innerHTML=t,console.log("HTML загружен"),!0)}()||console.log("Новых данных нет, используем исходную верстку"),function(){const e=[".subtitle","h1","h2","h3","h4",".presentation span",".year",".duties span",".edu_name span","address","ul li",".tools_title"].join(", ");document.querySelectorAll(e).forEach(e=>{e&&o(e)})}(),document.querySelectorAll(".hashtags span").forEach(e=>{e&&(e.addEventListener("input",i),o(e))}),document.querySelectorAll("li").forEach(e=>{e&&(e.removeEventListener("keydown",r),e.addEventListener("keydown",r))}),document.querySelectorAll(".interest_item").forEach(s),function(){const e=document.getElementById("generatePDF");e&&"undefined"!=typeof Waves&&(e.addEventListener("click",l),Waves.attach(e,["waves-dark"]))}(),window.addEventListener("beforeunload",n)}catch(t){console.error("Initialization error:",t)}});
